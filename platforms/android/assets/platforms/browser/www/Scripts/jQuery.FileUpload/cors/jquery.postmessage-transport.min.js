(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(window.jQuery)})(function(n){"use strict";var i=0,r=["accepts","cache","contents","contentType","crossDomain","data","dataType","headers","ifModified","mimeType","password","processData","timeout","traditional","type","url","username"],t=function(n){return n};n.ajaxSetup({converters:{"postmessage text":t,"postmessage json":t,"postmessage html":t}});n.ajaxTransport("postmessage",function(t){if(t.postMessage&&window.postMessage){var u,f=n("<a>").prop("href",t.postMessage)[0],e=f.protocol+"//"+f.host,o=t.xhr().upload;return{send:function(f,s){i+=1;var h={id:"postmessage-transport-"+i},c="message."+h.id;u=n('<iframe style="display:none;" src="'+t.postMessage+'" name="'+h.id+'"><\/iframe>').bind("load",function(){n.each(r,function(n,i){h[i]=t[i]});h.dataType=h.dataType.replace("postmessage ","");n(window).bind(c,function(t){t=t.originalEvent;var i=t.data,r;t.origin===e&&i.id===h.id&&(i.type==="progress"?(r=document.createEvent("Event"),r.initEvent(i.type,!1,!0),n.extend(r,i),o.dispatchEvent(r)):(s(i.status,i.statusText,{postmessage:i.result},i.headers),u.remove(),n(window).unbind(c)))});u[0].contentWindow.postMessage(h,e)}).appendTo(document.body)},abort:function(){u&&u.remove()}}}})});
//# sourceMappingURL=jquery.postmessage-transport.min.js.map
